# Vue3.0的特性

1. 检测机制的改变
	3.0将带来基于代理Proxy的observer实现，提供全语言覆盖的反应性跟踪。这就消除了Vue2当中基于Object.defineProperty的实现所存在的很多限制：
* 只能监测属性，不能监测对象
* 检测属性的添加和删除
* 检测数组索引和长度的变更
* 支持Map、Set、WeakMap和WeakSet

新的observer还提供了以下特性：

* 用于创建observer的公开API。这为中小规模场景提供了简单轻量级的跨组件状态管理解决方案
* 默认采用惰性观察。在2.x中，不管反应式数据有多大，都会在启动时别观察到。如果你的数据集很大，这可能会在应用启动时带来明显的开销。在3.x中，只观察用于渲染应用程序最初可见部分的数据
* 更精确的变更通知。在2.x中，通过Vue.set强制添加新属性将导致依赖于该对象的watcher收到变更通知。在3.x中，只有依赖于特定属性的watcher才会收到通知
* 不可变的observable：我们可以创建值的"不可变"版本（即使是嵌套属性），除非系统在内部暂时将其"解禁"。这个机制可用于冻结prop传递或Vuex状态树以外的变化
* 更好的调试功能：我们可以使用新的renderTracked和renderTriggered钩子精确地跟踪组件在设么时候以及为什么重新渲染

2. 模板
	模板方面没有大的变更，只改了作用域插槽，2.x的机制导致了作用域插槽变了，父组件会重新渲染，而3.0把作用域插槽改成了函数的方式，这样只会影响子组件的重新渲染，提升了渲染的性能
	
	同时，对于render函数的方面，vue3.0也会进行一系列更改来方便习惯直接使用api来生成vdom
	
3. 对象式的组件声明方式
	vue2.0中的组件是通过生命的方式传入一系列的optino，和TypeScript的结合需要通过一些装饰器的方式来做，虽然能实现功能，但是比较麻烦。3.0修改了组件的声明方式，改成了类式的写法，这样使得和TypeScript的结合变得很容易
	
	此外，vue的源码也改用了TypeScript来写。其实当代码的功能复杂之后，必须有一个静态类型系统来做一些辅助管理。现在vue3.0也全面改用TypeScript来重写了，更是使得对外暴露的api更容易结合TypeScript。静态类型系统对于复杂代码的维护确实很有必要
	
4. 其他方面的更改
	vue3.0的改变是全面的，上面只涉及到主要的3个方面，还有一些其他的更改：
	
* 支持自定义渲染器，从而使得weex可以通过自定义渲染器的方式来扩展，而不是直接fork源码来改的方式
* 支持Fragment（多个根节点）和Protal（在dom其他部分渲染组件内容）组件，针对一些特殊的场景做了处理
* 基于treeshaking优化，提供了更多的内置功能